<form #r="ngForm" action="/submit-form" (ngSubmit)="Insert(r)" method="post">
  <div class="main-user-info">
    <div class="user-input-box">
      <label for="fullName">Organized By:</label>
      <select id="inputState" class="form-select" name="orgBy" ngModel>
        <option selected>Choose...</option>
        <option>CSE</option>
        <OPtion>ECE</OPtion>
        <OPtion>EEE</OPtion>
        <OPtion>IT</OPtion>
        <OPtion>AI</OPtion>
        <OPtion>CIVIL</OPtion>
        <OPtion>MECH</OPtion>
      </select>
    </div>
    <div class="user-input-box">
      <label for="email">Type of Program</label>
      <select id="inputState" class="form-select" name="prgType" ngModel>
        <option selected>Choose...</option>
        <option>EXPERT TALK</option>
        <option>EXPOSURE VISIT</option>
        <option>MENTORINE SESSION</option>
        <option>SEMINAR</option>
        <option>WORKSHOP</option>
        <option>BOOTCAMP</option>
        <option>DEMO DAY</option>
        <option>EXHIBITION</option>
        <option>CHALLENGE</option>
        <option>HACKTHON</option>
        <option>TECH FEST</option>
        <option>FDP</option>
        <option>STTP</option>

      </select>
    </div>
    <div class="user-input-box">
      <label for="username">Program Coordinated By:</label>
      <input type="text" class="form-control" ngModel name="prgCoordinator">
    </div>

    <div class="user-input-box">
      <label for="phoneNumber">Program Theme</label>
      <select id="inputState" class="form-select" name="prgTheme" ngModel>
        <option></option>
        <option>TECHNOLOGY KNOWLEDGE</option>
        <option>INNOVATION</option>
        <option>DESIGN THINKING</option>
        <option>ENTREPRENEUR</option>
        <option>START UP</option>
        <option>COURSE RELATED</option>
        <option>PLACEMENTS</option>

      </select>
    </div>
    <div class="user-input-box">
      <label for="password">Start Date</label>
      <input type="date" class="form-control" id="startdate" ngModel name="startDate">
    </div>
    <div class="user-input-box">
      <label for="password">End Date</label>
      <input type="date" class="form-control" id="inputAddress" ngModel name="endDate">
    </div>
    <div class="user-input-box">
      <label for="password">Duration(in hrs)</label>
      <input type="text" class="form-control" id="inputAddress" ngModel name="prgDuration">
    </div>
    <div class="user-input-box">
      <label for="password">Number of students participated</label>
      <input type="text" class="form-control" id="inputAddress" ngModel name="num_std">
    </div>
    <div class="user-input-box">
      <label for="password">Number of Faculty participated</label>
      <input type="text" class="form-control" id="inputAddress" ngModel name="num_faculty">
    </div>
    <div class="user-input-box">
      <label for="password">Number of External person participated</label>
      <input type="number" class="form-control" id="inputAddress" ngModel name="num_externals">
    </div>
    <div class="user-input-box">
      <label for="password">Number of Resource persons participated</label>
      <input type="text" class="form-control" id="inputAddress" ngModel name="num_rsrc_person">
    </div>
    <div class="user-input-box">
      <label for="password">Expenditure Amount</label>
      <input type="text" class="form-control" id="inputAddress" placeholder="(in words)" name="message" ngModel
        name="amount">
    </div>
    <div class="user-input-box">
      <label for="password">Mode of Session</label>
      <select id="inputState" class="form-select" name="mode_session" ngModel>
        <option></option>
        <option>online</option>
        <option>offline</option>
        <option>dual mode</option>
      </select>
    </div>
    <div class="user-input-box">
      <label for="password">Remarks</label>
      <textarea rows="2" class="form-control" id="inputAddress" name="remarks" ngModel> </textarea>
    </div>
    <div class="user-input-box">
      <label for="password">Objective</label>
      <input type="text" class="form-control" id="inputAddress" ngModel name="objective">
    </div>
    <div class="user-input-box">
      <label for="password">Benifits obtained in terms of Learning/knowledge/Skills </label>
      <input type="text" class="form-control" id="inputAddress" name="benifits" n ngModel>
    </div>
    <div class="user-input-box">
      <label for="confirmPassword">Photos/videos</label>
      <input type="file" name="files" multiple id="files" accept="image/*, video/*" />
    </div>

  </div>
  <div class="form-submit-btn">
    <button type="button" value="Preview PDF" (click)="previewFormData(r)">preview</button>
    <input type="submit" value="Submit Form">
  </div>

</form>


<!-- Preview section -->
<div id="preview-section" style="display: none; width:50px">
  <h2>PDF Preview</h2>
  <!-- Preview content will appear here -->
  <iframe id="pdf-preview" width="50%" height="50px"></iframe>
</div>



<script>
  function previewFormData() {
    // Get form values
    const orgBy = document.querySelector('[name="orgBy"]').value;
    const prgType = document.querySelector('[name="prgType"]').value;
    const prgCoordinator = document.querySelector('[name="prgCoordinator"]').value;
    const prgTheme = document.querySelector('[name="prgTheme"]').value;
    const startDate = document.querySelector('[name="startDate"]').value;
    const endDate = document.querySelector('[name="endDate"]').value;
    const prgDuration = document.querySelector('[name="prgDuration"]').value;
    const num_std = document.querySelector('[name="num_std"]').value;
    const num_faculty = document.querySelector('[name="num_faculty"]').value;
    const num_externals = document.querySelector('[name="num_externals"]').value;
    const num_rsrc_person = document.querySelector('[name="num_rsrc_person"]').value;
    const amount = document.querySelector('[name="amount"]').value;
    const mode_session = document.querySelector('[name="mode_session"]').value;
    const remarks = document.querySelector('[name="remarks"]').value;
    const objective = document.querySelector('[name="objective"]').value;
    const benefits = document.querySelector('[name="benefits"]').value;
    const files = document.querySelector('[name="files"]').value;
    // Capture other form values similarly for other fields

    // Create a new jsPDF instance
    const doc = new jsPDF();

    // Construct the PDF content
    let content = `
Organized By: ${orgBy}
Program Type: ${prgType}
Program Coordinator: ${prgCoordinator}
Program Theme: ${prgTheme}
Start Date: ${startDate}
End Date: ${endDate}
Duration (in hrs): ${prgDuration}
Number of students participated: ${num_std}
Number of Faculty participated: ${num_faculty}
Number of External persons participated: ${num_externals}
Number of Resource persons participated: ${num_rsrc_person}
Expenditure Amount (in words): ${amount}
Mode of Session: ${mode_session}
Remarks: ${remarks}
Objective: ${objective}
Benefits obtained in terms of Learning/Knowledge/Skills: ${benefits}

`;

    // Set font and add content to the PDF
    doc.setFont('helvetica');
    doc.setFontSize(12);
    doc.text(content, 10, 10);

    // Display the PDF in the iframe for preview
    const pdfData = doc.output('datauristring');
    const iframe = document.getElementById('pdf-preview');
    iframe.src = pdfData;

    // Show the preview section
    document.getElementById('preview-section').style.display = 'block';

    // Prevent form submission for now
    return false;
  }
</script>